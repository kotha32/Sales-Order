"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getFilterBarBuildingBlockPrompts = getFilterBarBuildingBlockPrompts;
const i18n_1 = require("../../../i18n");
const utils_1 = require("../utils");
const types_1 = require("../../types");
const building_blocks_1 = require("./building-blocks");
const MANIFEST_LIBRARIES_GROUP = (0, building_blocks_1.getManifestPromptsGroup)();
const defaultAnswers = {
    id: 'FilterBar',
    bindingContextType: 'absolute'
};
const groupIds = {
    commonFilterBarBuildingBlockProperties: 'filterBarBuildingBlockProperties',
    filterConfigureEvents: 'filterConfigureEvents'
};
/**
 * Returns a list of prompts required to generate a filterbar building block.
 *
 * @param context - prompt context including data about project
 * @returns Prompt with questions for filterbar.
 */
async function getFilterBarBuildingBlockPrompts(context) {
    const { project } = context;
    const t = (0, i18n_1.translate)(i18n_1.i18nNamespaces.buildingBlock, 'prompts.filterBar.');
    const groups = [
        {
            id: groupIds.commonFilterBarBuildingBlockProperties,
            title: t('filterBarBuildingBlockPropertiesTitle'),
            description: t('filterBarBuildingBlockPropertiesDescription', { returnObjects: true })
        },
        {
            id: groupIds.filterConfigureEvents,
            title: t('filterBarConfigureEventsTitle'),
            description: t('filterBarConfigureEventsDescription', { returnObjects: true })
        },
        MANIFEST_LIBRARIES_GROUP
    ];
    return {
        groups,
        questions: [
            (0, utils_1.getViewOrFragmentPathPrompt)(context, t('viewOrFragmentPath.validate'), {
                message: t('viewOrFragmentPath.message'),
                guiOptions: {
                    groupId: groupIds.commonFilterBarBuildingBlockProperties,
                    mandatory: true,
                    dependantPromptNames: ['aggregationPath']
                }
            }),
            (0, utils_1.getBuildingBlockIdPrompt)(context, t('id.validation'), {
                message: t('id.message'),
                default: defaultAnswers.id,
                guiOptions: { groupId: groupIds.commonFilterBarBuildingBlockProperties, mandatory: true }
            }),
            (0, utils_1.getBindingContextTypePrompt)({
                message: t('bindingContextType'),
                default: defaultAnswers.bindingContextType,
                guiOptions: {
                    groupId: groupIds.commonFilterBarBuildingBlockProperties,
                    mandatory: true,
                    dependantPromptNames: ['buildingBlockData.metaPath.qualifier']
                }
            }),
            ...(project && (0, utils_1.isCapProject)(project)
                ? [
                    await (0, utils_1.getCAPServicePrompt)(context, {
                        message: t('service'),
                        guiOptions: {
                            groupId: groupIds.commonFilterBarBuildingBlockProperties,
                            mandatory: true,
                            dependantPromptNames: []
                        }
                    })
                ]
                : []),
            (0, utils_1.getAggregationPathPrompt)(context, {
                message: t('aggregation'),
                guiOptions: { groupId: groupIds.commonFilterBarBuildingBlockProperties, mandatory: true }
            }),
            (0, utils_1.getEntityPrompt)(context, {
                message: t('entity'),
                guiOptions: {
                    groupId: groupIds.commonFilterBarBuildingBlockProperties,
                    mandatory: true,
                    dependantPromptNames: ['buildingBlockData.metaPath.qualifier']
                }
            }),
            (0, utils_1.getAnnotationPathQualifierPrompt)(context, {
                message: t('qualifier'),
                guiOptions: {
                    groupId: groupIds.commonFilterBarBuildingBlockProperties,
                    mandatory: true,
                    placeholder: t('qualifierPlaceholder'),
                    hint: t('valuesDependentOnEntityTypeInfo')
                }
            }, ["com.sap.vocabularies.UI.v1.SelectionFields" /* UIAnnotationTerms.SelectionFields */]),
            {
                type: 'input',
                name: 'buildingBlockData.filterChanged',
                message: t('filterChanged'),
                guiOptions: { groupId: groupIds.filterConfigureEvents, placeholder: t('filterChangedPlaceholder') }
            },
            {
                type: 'input',
                name: 'buildingBlockData.search',
                message: t('search'),
                guiOptions: { groupId: groupIds.filterConfigureEvents, placeholder: t('searchPlaceholder') }
            }
        ],
        initialAnswers: {
            buildingBlockData: {
                buildingBlockType: types_1.BuildingBlockType.FilterBar
            }
        }
    };
}
//# sourceMappingURL=filter-bar.js.map